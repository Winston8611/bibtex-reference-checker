# 更新日志 (CHANGELOG)

## [1.1.0] - 2026-01-11

### 新增功能 ✨

#### 智能标题匹配验证
- **自动检测搜索结果准确性**: 程序现在会验证Google Scholar搜索到的文献是否为正确的文献
- **标题差异检测**: 如果搜索结果的标题与原始标题差异超过1个单词，会被标记为"标题不匹配"
- **自动排除不匹配文献**: 标题不匹配的文献不会被自动修正，避免使用错误的数据
- **单独显示警告**: 标题不匹配的文献会在检查结果中单独列出，提示用户人工处理

#### 标题匹配规则
```
✓ 允许的差异:
  - 大小写不同 (会使用Google Scholar的版本)
  - 标点符号差异
  - ≤1个单词的差异

✗ 不允许的差异:
  - >1个单词的差异 → 标记为需要人工检查
```

### 改进 🔧

- **更准确的文献验证**: 减少因搜索到错误文献而导致的数据错误
- **更安全的批量修正**: 自动排除可疑的搜索结果
- **更清晰的反馈**: 单独显示需要人工检查的文献
- **增强的HTML报告**: 报告中包含标题不匹配的警告部分

### 技术细节

新增模块和函数:
- `FieldComparator.normalize_title()` - 标题规范化
- `FieldComparator.calculate_title_match_score()` - 计算标题匹配度
- `EntryComparison.title_mismatch` - 标题不匹配标记
- `InteractiveReviewer._display_title_mismatches()` - 显示标题不匹配警告

### 使用示例

运行检查后，如果发现标题不匹配的文献，会看到：

```
================================================================================
⚠ 警告：发现 2 条文献标题不匹配！
这些文献可能在Google Scholar搜索到了错误的结果，将不会对其进行修正。
================================================================================

┌─────────────────┬────────────────────────────────┬────────────────────────────────┐
│ Citation Key    │ 原始标题                       │ Scholar搜索到的标题             │
├─────────────────┼────────────────────────────────┼────────────────────────────────┤
│ example2020     │ Sample Article for Testing...  │ Different Article Title...     │
└─────────────────┴────────────────────────────────┴────────────────────────────────┘

这些条目需要人工检查和修正。
```

### 测试

新增测试文件 `test_title_matching.py`:
- 7个测试用例全部通过
- 覆盖各种标题匹配场景

运行测试:
```bash
python test_title_matching.py
```

---

## [1.0.0] - 2026-01-11

### 首次发布 🎉

#### 核心功能
- BibTeX文件解析
- Google Scholar自动搜索
- 字段比对和差异检测
- 交互式审查界面
- 批量修正功能
- HTML报告生成

#### 技术栈
- Python 3.7+
- Selenium浏览器自动化
- bibtexparser解析库
- colorama彩色输出
- tabulate表格显示

#### 文档
- 完整的使用指南
- 快速开始教程
- 常见问题解答
- 项目总结文档

---

## 升级说明

### 从 1.0.0 升级到 1.1.0

**无需任何操作**，新功能自动生效。

如果已安装 1.0.0 版本，只需更新代码文件：
1. 下载或更新以下文件：
   - `comparator.py` (新增标题匹配功能)
   - `interactive_review.py` (新增标题不匹配显示)
   - `main.py` (更新流程处理)
   - `file_updater.py` (更新HTML报告)

2. 新增测试文件 (可选):
   - `test_title_matching.py`

**向后兼容**: 完全兼容 1.0.0 版本的所有功能和使用方式。

---

## 未来计划 🚀

- [ ] 支持更多学术搜索引擎（CrossRef, Semantic Scholar）
- [ ] 图形用户界面（GUI）
- [ ] 并行处理提升速度
- [ ] 更多输出格式（Excel, CSV）
- [ ] 配置文件支持
- [ ] 插件系统

---

**维护者**: BibTeX Checker Team
**最后更新**: 2026-01-11
